jQuery(function(i){var t=function(e,t,r,a,s){if(isNaN(e)){if(!(e=e instanceof jQuery?e:i(e)).length)return;e=parseInt(e.offset().top)}(s=s||"html, body")instanceof jQuery||(s=i(s)),r=r||500,a=a||0,t=t||0,setTimeout(function(){s.animate({scrollTop:e+t},r)},a)};({data:[],form:i("form.checkout"),submitButton:i(".submit-checkout-form"),errorsMessages:{empty_value:"Обов’язкове поле",phone_format:"Необхідно ввести номер у форматі +48",alphabets:"Необхідно використати A-z символи",incorrect_email:"У введеному email пропущені символи",incorrect_country:"Некоректна назва країни",zip_format:"Необхідно ввести код у форматі XX-XXX",incorrect_city:"Некоректна назва міста",incorrect_street:"Некоректна адреса"},errors:[],ajaxurl:"AJAX URL",init:function(){var r=this;r.submitButton.click(function(e){e.preventDefault(),r.validateForm()?i.post(r.ajaxurl,{data:r.form.serialize(),action:"checkout"},function(e){e.success?alert("Mission complete!"):alert("Something wrong!")},"json"):t(r.form.find(".error:first"),-100)}),i("[data-toggle-target]").click(function(){var e=i(this),e=i(e.data("toggle-target"));e.length&&e.slideToggle()}),i("[data-toggle-target-required-fields]").click(function(){var e=i(this),t=i(e.data("toggle-target-required-fields"));t.length&&(e.prop("checked")?(t.find("input").prop("required",e.prop("checked")),t.slideToggle()):t.slideToggle(function(){t.find("input").prop("required",e.prop("checked"))}))}),i(".input-field").on("input keyup keydown","input",function(){var e=i(this),t=e.val();e.attr("required")&&r.validate(e,t),r.autofillCityAndStreet(e)}),r.validateCurrentValue(),i("input, select, textarea").on("focus",function(){r.removeError(i(this))})},validateCurrentValue:function(){var r=this;r.form.find("input, select, textarea").each(function(){var e=i(this),t=e.val();e.attr("required")&&void 0!==e.attr("value")&&""!==e.attr("value")?"text"===e.attr("type")&&r.validate(e,t):r.removeError(e)})},validateForm:function(){var r=this,e=r.form.find("input, select, textarea");return r.errors=[],e.each(function(){var e=i(this),t=e.val();e.attr("required")?"text"===e.attr("type")&&r.validate(e,t):r.removeError(e)}),!r.errors.length},validate:function(e,t){var r=this;""!==t?e.hasClass("validate-email")?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.incorrect_email):e.hasClass("validate-zip")?/^\d{2}-\d{3}$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.zip_format):e.hasClass("validate-phone")?/^\+48\d{9}$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.phone_format):e.hasClass("validate-alphabets")?/^[A-Za-z]+$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.alphabets):e.hasClass("validate-country")?/^(польща|poland)$/.test(t.toLowerCase())?r.setValid(e):r.setError(e,r.errorsMessages.alphabets):e.hasClass("validate-city")?/^[A-Za-z\s]+$/.test(t)&&!/^[\s\d]+$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.incorrect_city):!e.hasClass("validate-street")||/^[A-Za-z\s\d]+$/.test(t)&&!/^[\s\d]+$/.test(t)?r.setValid(e):r.setError(e,r.errorsMessages.incorrect_street):r.setError(e,r.errorsMessages.empty_value)},setError:function(e,t){var r=e.parent();r.addClass("error").removeClass("valid").find(".error-message").remove(),r.append(i("<span>").addClass("error-message").text(t)),this.errors.push(e.attr("name"))},removeError:function(e){e.parent().removeClass("error").find(".error-message").remove()},setValid:function(e){e.parent().removeClass("error").addClass("valid").find(".error-message").remove()},autofillCityAndStreet:function(e){var t,r,a,s,i=this;/country|zip$/.test(e.attr("name"))&&e.parent().hasClass("valid")&&(t=(e=e.parents(".address-fields:first")).find('input[name$="country"]'),r=e.find('input[name$="zip"]'),a=e.find('input[name$="city"]'),s=e.find('input[name$="street"]'),t.parent().hasClass("valid"))&&r.parent().hasClass("valid")&&i.getZipInfo(t.val(),r.val(),function(e){e&&(a.val(e.place),s.val(e.province),i.validate(a),i.validate(s))})},getZipInfo:function(e,t,r){i.getJSON("/zipcodes.pl.json",function(e){e=e.filter(function(e){return e.zipcode===t&&"PL"===e.country_code}),e=!!e.length&&e[0];r(e)})}}).init()});
//# sourceMappingURL=scripts.min.js.map
